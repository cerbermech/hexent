<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Projects — Hexent</title>
  <meta name="description" content="Витрина продуктов: Котлета и Juju.">
  <style>
    :root {
      --bg: #05070b;
      --bg-soft: #0c1018;
      --text: #eef2f7;
      --muted: #9ca7b6;
      --line: rgba(148, 163, 184, 0.25);
      --card: rgba(10, 14, 22, 0.8);
      --accent: #60a5fa;
      --radius: 18px;
      --container: 1080px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      color: var(--text);
      background:
        radial-gradient(700px 450px at 10% -5%, rgba(96, 165, 250, 0.18), transparent 55%),
        radial-gradient(650px 420px at 90% 0%, rgba(192, 132, 252, 0.14), transparent 55%),
        linear-gradient(180deg, #060910 0%, #03050a 100%);
      line-height: 1.45;
    }

    a { color: inherit; text-decoration: none; }

    .container {
      width: min(100%, var(--container));
      margin: 0 auto;
      padding: 0 20px;
    }

    .site-header {
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(10px);
      background: linear-gradient(to bottom, rgba(3, 5, 10, 0.95), rgba(3, 5, 10, 0.7), transparent);
      border-bottom: 1px solid rgba(148, 163, 184, 0.16);
    }

    .header-inner {
      height: 68px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
    }

    .brand {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 0.04em;
    }

    .nav {
      display: flex;
      align-items: center;
      gap: 16px;
      color: var(--muted);
      font-size: 14px;
    }

    .nav a {
      padding: 6px 8px;
      border-radius: 999px;
      transition: color .2s ease, background .2s ease;
    }

    .nav a:hover { color: var(--text); background: rgba(148, 163, 184, 0.12); }

    .hero {
      padding: 64px 0 30px;
    }

    h1 {
      margin: 0;
      font-size: clamp(30px, 5vw, 52px);
      letter-spacing: -0.02em;
      line-height: 1.06;
    }

    .subtitle {
      margin: 14px 0 0;
      color: var(--muted);
      max-width: 680px;
      font-size: 15px;
    }

    .grid {
      padding: 22px 0 72px;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 16px;
    }

    .project-card {
      position: relative;
      display: block;
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: linear-gradient(160deg, rgba(13, 18, 28, 0.94), var(--card));
      overflow: hidden;
      padding: 22px;
      transform: translateY(14px);
      opacity: 0;
      transition: transform .45s ease, opacity .45s ease, border-color .25s ease, box-shadow .25s ease;
      will-change: transform;
    }

    .project-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(240px 140px at var(--mx,50%) var(--my,50%), rgba(96,165,250,0.15), transparent 70%);
      pointer-events: none;
      opacity: .8;
      transition: opacity .25s ease;
    }

    .project-card.is-visible {
      transform: translateY(0);
      opacity: 1;
    }

    .project-card:hover {
      border-color: rgba(96, 165, 250, 0.5);
      box-shadow: 0 14px 28px rgba(3, 7, 15, 0.45);
    }

    .project-card h2 {
      margin: 0;
      font-size: 28px;
      letter-spacing: -0.01em;
    }

    .description {
      margin: 8px 0 14px;
      color: #c8d1dd;
      font-size: 15px;
    }

    .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 16px;
    }

    .tag {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.28);
      color: var(--muted);
      font-size: 12px;
    }

    .meta {
      font-size: 12px;
      color: #7f8da1;
      margin-bottom: 18px;
    }

    .actions {
      display: flex;
      gap: 10px;
      position: relative;
      z-index: 1;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      border: 1px solid transparent;
      font-size: 13px;
      padding: 9px 14px;
      transition: transform .2s ease, border-color .2s ease, background .2s ease;
    }

    .btn-primary {
      background: rgba(96, 165, 250, 0.2);
      border-color: rgba(96, 165, 250, 0.45);
    }

    .btn-secondary {
      background: rgba(15, 22, 35, 0.75);
      border-color: rgba(148, 163, 184, 0.35);
      color: #d7dde7;
    }

    .btn:hover { transform: translateY(-1px); }

    @media (max-width: 860px) {
      .grid { grid-template-columns: 1fr; }
      .header-inner { height: 60px; }
    }

    @media (prefers-reduced-motion: reduce) {
      * { scroll-behavior: auto !important; }
      .project-card,
      .project-card::before,
      .btn,
      .nav a { transition-duration: .01ms !important; }
      .project-card { transform: none !important; }
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">Projects</div>
      <nav class="nav" aria-label="Основная навигация">
        <a href="/agency">Agency</a>
        <a href="/bitrix24">Bitrix24</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero container">
      <h1>Витрина проектов</h1>
      <p class="subtitle">Витрина продуктов. Два проекта в проде. Больше скоро.</p>
    </section>

    <section class="container grid" id="projectsGrid" aria-label="Проекты">
      <article class="project-card" data-key="kotleta">
        <h2>Котлета</h2>
        <p class="description">Finance OS для малого бизнеса</p>
        <div class="tags">
          <span class="tag">Cashflow</span>
          <span class="tag">Budgets</span>
          <span class="tag">Dashboards</span>
        </div>
        <div class="meta">Updated: 2026-02</div>
        <div class="actions">
          <a class="btn btn-primary open-link" href="#" target="_blank" rel="noopener noreferrer">Открыть</a>
          <a class="btn btn-secondary demo-link" href="#" target="_blank" rel="noopener noreferrer" hidden>Демо</a>
        </div>
      </article>

      <article class="project-card" data-key="juju">
        <h2>Juju</h2>
        <p class="description">Минималистичный таск-трекер</p>
        <div class="tags">
          <span class="tag">Boards</span>
          <span class="tag">Focus</span>
          <span class="tag">Flow</span>
        </div>
        <div class="meta">Updated: 2026-02</div>
        <div class="actions">
          <a class="btn btn-primary open-link" href="#" target="_blank" rel="noopener noreferrer">Открыть</a>
          <a class="btn btn-secondary demo-link" href="#" target="_blank" rel="noopener noreferrer" hidden>Демо</a>
        </div>
      </article>
    </section>
  </main>

  <script>
    const KOTLETA_URL = "https://<REPLACE_ME_KOTLETA_DOMAIN>/";
    const JUJU_URL = "https://<REPLACE_ME_JUJU_DOMAIN>/";

    const DEMO_URLS = {
      kotleta: "",
      juju: ""
    };

    const PROJECT_URLS = {
      kotleta: KOTLETA_URL,
      juju: JUJU_URL
    };

    const SENSITIVE_KEYS = new Set(["token", "auth", "password"]);

    function isSensitive(key) {
      const normalized = key.toLowerCase();
      return SENSITIVE_KEYS.has(normalized) || normalized.includes("token") || normalized.includes("auth") || normalized.includes("password");
    }

    function buildUtmUrl(baseUrl, params = {}) {
      const current = new URLSearchParams(window.location.search);
      const target = new URL(baseUrl);

      for (const [key, value] of current.entries()) {
        if (!isSensitive(key) && !target.searchParams.has(key)) {
          target.searchParams.set(key, value);
        }
      }

      const defaults = {
        utm_source: "projects",
        utm_medium: "showcase",
        utm_campaign: "main",
        ...params
      };

      Object.entries(defaults).forEach(([key, value]) => {
        if (!target.searchParams.has(key) && value) {
          target.searchParams.set(key, value);
        }
      });

      return target.toString();
    }

    const cards = Array.from(document.querySelectorAll('.project-card'));
    const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    cards.forEach((card, index) => {
      const key = card.dataset.key;
      const openUrl = buildUtmUrl(PROJECT_URLS[key], { utm_content: key });
      const openLink = card.querySelector('.open-link');
      const demoLink = card.querySelector('.demo-link');

      openLink.href = openUrl;
      card.dataset.href = openUrl;

      const demoBase = DEMO_URLS[key];
      if (demoBase) {
        demoLink.href = buildUtmUrl(demoBase, { utm_content: `${key}_demo` });
        demoLink.hidden = false;
      }

      card.style.transitionDelay = `${Math.min(index * 90, 180)}ms`;

      card.addEventListener('click', (event) => {
        if (event.target.closest('a')) return;
        window.open(card.dataset.href, '_blank', 'noopener,noreferrer');
      });

      card.addEventListener('keydown', (event) => {
        if (event.key === 'Enter' || event.key === ' ') {
          event.preventDefault();
          window.open(card.dataset.href, '_blank', 'noopener,noreferrer');
        }
      });

      card.tabIndex = 0;
      card.setAttribute('role', 'link');
      card.setAttribute('aria-label', `Открыть проект ${key}`);
    });

    if (!reduceMotion && 'IntersectionObserver' in window) {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.18 });

      cards.forEach((card) => observer.observe(card));
    } else {
      cards.forEach((card) => card.classList.add('is-visible'));
    }

    if (!reduceMotion) {
      cards.forEach((card) => {
        card.addEventListener('mousemove', (event) => {
          const rect = card.getBoundingClientRect();
          const x = event.clientX - rect.left;
          const y = event.clientY - rect.top;
          const rotateX = ((y / rect.height) - 0.5) * -5;
          const rotateY = ((x / rect.width) - 0.5) * 5;
          card.style.setProperty('--mx', `${x}px`);
          card.style.setProperty('--my', `${y}px`);
          card.style.transform = `translateY(0) perspective(900px) rotateX(${rotateX.toFixed(2)}deg) rotateY(${rotateY.toFixed(2)}deg)`;
        });

        card.addEventListener('mouseleave', () => {
          card.style.transform = 'translateY(0) perspective(900px) rotateX(0deg) rotateY(0deg)';
          card.style.removeProperty('--mx');
          card.style.removeProperty('--my');
        });
      });
    }
  </script>
</body>
</html>
